{% extends "base.html" %}

{% block title %}ê³µí¬ & íƒìš• ì§€ìˆ˜ - Stock Insight AI{% endblock %}
{% block meta_description %}ì‹¤ì‹œê°„ ê³µí¬ & íƒìš• ì§€ìˆ˜ (Fear & Greed Index) - S&P 500 ëª¨ë©˜í…€, VIX ë³€ë™ì„±, RSI ë¶„ì„ìœ¼ë¡œ ì‹œì¥ ì‹¬ë¦¬ë¥¼ í•œëˆˆì— íŒŒì•…í•˜ì„¸ìš”{% endblock %}
{% block og_title %}ê³µí¬ & íƒìš• ì§€ìˆ˜ - Stock Insight AI{% endblock %}
{% block og_description %}S&P 500 ëª¨ë©˜í…€, VIX, RSI ê¸°ë°˜ ì‹œì¥ ì‹¬ë¦¬ ë¶„ì„ - ì§€ê¸ˆ ì‹œì¥ì€ ê³µí¬ì¸ê°€ íƒìš•ì¸ê°€?{% endblock %}

{% block structured_data %}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "ê³µí¬ & íƒìš• ì§€ìˆ˜ - Stock Insight AI",
    "description": "S&P 500 ëª¨ë©˜í…€, VIX ë³€ë™ì„±, RSI ë¶„ì„ ê¸°ë°˜ ì‹œì¥ ì‹¬ë¦¬ ì§€í‘œ",
    "url": "https://stock-insight.app/fear-greed-index",
    "isPartOf": {
        "@type": "WebSite",
        "name": "Stock Insight AI",
        "url": "https://stock-insight.app"
    }
}
</script>
{% endblock %}

{% block content %}
<div class="glass-panel" style="padding: 1.25rem; margin-bottom: 2rem;">
    <h3 style="margin: 0; font-size: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
        <span style="font-size: 2rem;">ğŸ˜¨</span> ê³µí¬ & íƒìš• ì§€ìˆ˜ (Fear & Greed Index)
    </h3>
    <p style="color: #94a3b8; margin-top: 0.5rem;">
        ì‹œì¥ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìì²´ ë¶„ì„í•œ í˜„ì¬ ì‹œì¥ì˜ ì‹¬ë¦¬ ìƒíƒœì…ë‹ˆë‹¤. (0: ê·¹ë„ì˜ ê³µí¬ ~ 100: ê·¹ë„ì˜ íƒìš•)
    </p>
</div>

{% if error %}
<div class="glass-panel" style="border-color: #fca5a5; color: #fca5a5;">
    âš ï¸ {{ error }}
</div>
{% else %}
<div class="gauge-container glass-panel" style="text-align: center; padding: 2rem;">
    <!-- Plotly Chart Injector -->
    <div id="gauge-chart"></div>
</div>

<!-- History Trend Chart -->
<div class="glass-panel" style="padding: 1.5rem; margin-top: 1.5rem;">
    <div id="trend-chart"></div>
</div>

<div class="metrics-grid" style="margin-top: 2rem;">
    <div class="metric-card" style="text-align: center;">
        <div style="font-size: 0.9rem; color: #94a3b8;">ì‹œì¥ ëª¨ë©˜í…€ (S&P 500)</div>
        <div style="font-size: 2rem; font-weight: bold; margin-top: 0.5rem; color: #38bdf8;">
            {{ details['Momentum Score'] }}
        </div>
        <div style="font-size: 0.8rem; color: #64748b; margin-top: 0.5rem;">ì¶”ì„¸ ê°•ë„</div>
    </div>

    <div class="metric-card" style="text-align: center;">
        <div style="font-size: 0.9rem; color: #94a3b8;">ì‹œì¥ ë³€ë™ì„± (VIX)</div>
        <div style="font-size: 2rem; font-weight: bold; margin-top: 0.5rem; color: #38bdf8;">
            {{ details['Volatility Score'] }}
        </div>
        <div style="font-size: 0.8rem; color: #64748b; margin-top: 0.5rem;">í˜„ì¬ VIX: {{ details['VIX']|round(2) }}</div>
    </div>

    <div class="metric-card" style="text-align: center;">
        <div style="font-size: 0.9rem; color: #94a3b8;">ë§¤ìˆ˜ ê°•ë„ (RSI)</div>
        <div style="font-size: 2rem; font-weight: bold; margin-top: 0.5rem; color: #38bdf8;">
            {{ details['Strength Score'] }}
        </div>
        <div style="font-size: 0.8rem; color: #64748b; margin-top: 0.5rem;">í˜„ì¬ RSI: {{ details['RSI']|round(2) }}</div>
    </div>
</div>
{% endif %}

{% block extra_scripts %}
<script>
    {% if gauge_json %}
    var gaugeData = {{ gauge_json | safe }};
    Plotly.newPlot('gauge-chart', gaugeData.data, gaugeData.layout, { displayModeBar: false, responsive: true });
    {% endif %}

    {% if trend_json %}
    var trendData = {{ trend_json | safe }};
    Plotly.newPlot('trend-chart', trendData.data, trendData.layout, { displayModeBar: false, responsive: true });
    {% endif %}
</script>
{% endblock %}
{% endblock %}