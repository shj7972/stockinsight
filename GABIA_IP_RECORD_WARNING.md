# 가비아 A 레코드 설정 - 주의사항

## ⚠️ 중요한 경고

**Heroku는 공식적으로 A 레코드를 지원하지 않습니다.**

하지만 일부 경우에 작동할 수 있습니다. 이는 다음 이유 때문입니다:

1. **herokudns.com이 여러 IP로 해석됨**
   - 로드 밸런서 IP 주소들
   - IP가 변경될 수 있음

2. **A 레코드의 위험성**
   - IP 주소가 변경되면 접속 불가
   - 수동으로 업데이트 필요
   - 로드 밸런서 장애 시 문제 발생 가능

---

## 📋 stock-insight.app의 IP 주소

`transparent-parakeet-zxdpwyqq4d7vu4hzd0wepwcn.herokudns.com`이 해석하는 IP 주소들:

### 확인된 IP 주소들:

1. `52.223.46.195`
2. `3.33.193.101`
3. `15.197.246.237`
4. `99.83.183.127`

**⚠️ 주의:** 이 IP 주소들은 여러 개이며, 변경될 수 있습니다.

---

## 🔧 가비아에 A 레코드 설정 방법 (권장하지 않음)

### 방법 1: 단일 IP 주소 사용

**가비아 DNS 관리 페이지에서:**

1. 레코드 추가
2. Type: `A`
3. 호스트: `@` (또는 비워두기)
4. 값: `52.223.46.195` (또는 다른 IP 중 하나)
5. TTL: `3600`
6. 저장

**⚠️ 문제점:**
- 하나의 IP만 사용하므로 로드 밸런서의 이점을 활용하지 못함
- 해당 IP가 장애 시 접속 불가

### 방법 2: 여러 A 레코드 사용 (가능한 경우)

일부 DNS 제공업체는 같은 호스트에 여러 A 레코드를 허용합니다.

**가비아에서 여러 A 레코드 추가:**
- A 레코드 1: `@` → `52.223.46.195`
- A 레코드 2: `@` → `3.33.193.101`
- A 레코드 3: `@` → `15.197.246.237`
- A 레코드 4: `@` → `99.83.183.127`

**⚠️ 문제점:**
- 가비아가 여러 A 레코드를 지원하는지 확인 필요
- IP가 변경되면 수동 업데이트 필요

---

## ⚠️ A 레코드 사용의 위험성

### 1. IP 주소 변경

- Heroku는 로드 밸런서를 사용합니다
- IP 주소가 변경될 수 있습니다
- 변경 시 접속 불가

### 2. 로드 밸런서 장애

- 특정 IP가 장애 시 해당 IP로 접속 불가
- 여러 IP를 사용하는 것이 안전하지만, A 레코드로는 제한적

### 3. 수동 관리 필요

- IP 변경 시 DNS 레코드를 수동으로 업데이트해야 함
- 자동으로 처리되지 않음

---

## ✅ 권장 해결책: Cloudflare 사용

**A 레코드 대신 Cloudflare 사용을 강력히 권장합니다:**

### 이유:

1. **자동 관리**
   - herokudns.com의 IP 변경 시 자동 반영
   - 수동 업데이트 불필요

2. **안정성**
   - 로드 밸런서의 모든 IP 활용
   - 장애 시 자동으로 다른 IP로 전환

3. **무료**
   - Cloudflare 무료 플랜 사용 가능

4. **추가 기능**
   - DDoS 보호
   - CDN 기능
   - 보안 강화

---

## 📝 가비아 A 레코드 설정 (임시 해결책)

**unsedam.kr에서 작동한다면, stock-insight.app도 시도해볼 수 있습니다.**

### 설정 방법:

1. **가비아 DNS 관리 페이지 접속**
   - https://www.gabia.com 로그인
   - "내 도메인" → "도메인 관리"
   - `stock-insight.app` 선택
   - "DNS 관리" 클릭

2. **A 레코드 추가**
   - "레코드 추가" 또는 "Add Record" 클릭
   - Type: `A`
   - 호스트: `@` (또는 비워두기, 루트 도메인용)
   - 값/IP: `52.223.46.195` (또는 다른 IP)
   - TTL: `3600`
   - 저장

3. **여러 A 레코드 추가 (가능한 경우)**
   - 같은 호스트(`@`)에 여러 A 레코드 추가
   - 각각 다른 IP 주소 사용

4. **DNS 전파 대기**
   - 1-24시간 소요
   - 빠른 경우 10분~1시간

5. **접속 확인**
   - `https://stock-insight.app` 접속 테스트

---

## 🔍 IP 주소 확인 방법

### 현재 확인된 IP 주소들:

```powershell
# PowerShell에서 확인
Resolve-DnsName transparent-parakeet-zxdpwyqq4d7vu4hzd0wepwcn.herokudns.com -Type A
```

**결과:**
- `52.223.46.195`
- `3.33.193.101`
- `15.197.246.237`
- `99.83.183.127`

### IP 주소 변경 확인:

정기적으로 확인하여 변경되었는지 체크:
```powershell
Resolve-DnsName transparent-parakeet-zxdpwyqq4d7vu4hzd0wepwcn.herokudns.com -Type A
```

**IP가 변경되면:**
- 가비아 DNS에서 A 레코드 업데이트 필요
- 또는 Cloudflare로 변경 권장

---

## 📊 비교: A 레코드 vs Cloudflare

| 항목 | A 레코드 | Cloudflare |
|------|----------|------------|
| 설정 난이도 | 쉬움 | 보통 |
| 자동 관리 | ❌ 수동 | ✅ 자동 |
| IP 변경 대응 | ❌ 수동 업데이트 | ✅ 자동 반영 |
| 로드 밸런서 활용 | 제한적 | ✅ 완전 활용 |
| 안정성 | 낮음 | 높음 |
| 비용 | 무료 | 무료 |
| 추가 기능 | 없음 | DDoS 보호, CDN 등 |

---

## 🎯 권장 사항

### 단기 해결책:
- **A 레코드 사용** (unsedam.kr처럼 작동한다면)
- IP 주소: `52.223.46.195` (또는 다른 IP)
- 정기적으로 IP 변경 확인

### 장기 해결책:
- **Cloudflare로 DNS 변경** (강력 권장)
- 자동 관리 및 안정성 향상
- 추가 보안 기능

---

## ⚠️ 최종 권장사항

**unsedam.kr에서 A 레코드가 작동한다면:**

1. **임시로 A 레코드 사용 가능**
   - 빠른 해결책
   - IP 주소: `52.223.46.195` (또는 다른 IP)

2. **하지만 Cloudflare 사용을 권장**
   - 장기적으로 더 안정적
   - 자동 관리
   - 추가 보안 기능

3. **IP 변경 모니터링**
   - 정기적으로 IP 주소 확인
   - 변경 시 즉시 업데이트

---

**결론: A 레코드로 작동할 수 있지만, Cloudflare 사용을 강력히 권장합니다!**

